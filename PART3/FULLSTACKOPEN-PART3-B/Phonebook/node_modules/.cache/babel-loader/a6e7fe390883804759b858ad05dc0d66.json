{"ast":null,"code":"import _slicedToArray from\"/home/fascher/Desktop/FULLSTACKOPEN/PART3/FULLSTACKOPEN-PART3-B/Phonebook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Person from\"./components/Person\";import Form from\"./components/Form\";import Filter from\"./components/Filter\";import axios from\"axios\";import personService from\"./services/persons\";var App=function App(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),person=_useState2[0],setPerson=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),clean=_useState4[0],setClean=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),number=_useState6[0],setNumber=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),filter=_useState8[0],setFilter=_useState8[1];// const [del, setDel] = useState(false)\nuseEffect(function(){personService.getAll().then(function(res){setPerson(res);});},[]);// useEffect(() => {\n//   noteService\n//     .getAll()\n//     .then(initialNotes => {\n//       setNotes(initialNotes)\n//     })\n// }, [])\nvar form=function form(event){event.preventDefault();if(names){if(window.confirm(\"\".concat(clean,\" is already in the phonebook, replace?\"))){var id=person.find(function(x){return x.name===clean;}).id;// console.log(id)\nvar personObject1={name:clean,number:number};personService.replace(id,personObject1).then(function(res){console.log(res);// return setPerson(res)\n});personService.getAll().then(function(res){return setPerson(res);});console.log(person);}}else{var personObject={name:clean,number:number};personService.create(personObject).then(function(res){console.log(number);return setPerson(person.concat(res));});}setClean(\"\");setNumber(\"\");};var _remove=function remove(id){if(window.confirm(\"Do you really want to delete?\")){personService.update(id).then(function(res){console.log(res);setFilter(\"\");}).catch(function(error){alert(\"the note '\".concat(person.filter(function(x){return x.id===id;}).map(function(x){return x.name;}),\"' was already deleted from server\"));setPerson(person.filter(function(n){return n.id!==id;}));});personService.getAll().then(function(res){return setPerson(res);});}};// console.log(id)\nvar change1=function change1(event){setClean(event.target.value);};var change2=function change2(event){setNumber(event.target.value);};var change0=function change0(event){setFilter(event.target.value);};var names=person.map(function(person){return person.name;}).includes(\"\".concat(clean));var filtered=person.filter(function(persons){return persons.name.toUpperCase().includes(\"\".concat(filter.toUpperCase()));});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Phonebook\"),/*#__PURE__*/React.createElement(Form,{form:form,filter:filter,change0:change0,change1:change1,change2:change2,number:number,clean:clean}),/*#__PURE__*/React.createElement(\"h2\",null,\"Numbers\"),/*#__PURE__*/React.createElement(\"ul\",null,filtered.map(function(person,i){return/*#__PURE__*/React.createElement(Person,{key:i,name:person.name,number:person.number,remove:function remove(){return _remove(person.id);}});})));};export default App;","map":{"version":3,"sources":["/home/fascher/Desktop/FULLSTACKOPEN/PART3/FULLSTACKOPEN-PART3-B/Phonebook/src/App.js"],"names":["React","useState","useEffect","Person","Form","Filter","axios","personService","App","props","person","setPerson","clean","setClean","number","setNumber","filter","setFilter","getAll","then","res","form","event","preventDefault","names","window","confirm","id","find","x","name","personObject1","replace","console","log","personObject","create","concat","remove","update","catch","error","alert","map","n","change1","target","value","change2","change0","includes","filtered","persons","toUpperCase","i"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Person from \"./components/Person\";\nimport Form from \"./components/Form\";\nimport Filter from \"./components/Filter\";\nimport axios from \"axios\";\nimport personService from \"./services/persons\";\n\nconst App = (props) => {\n  const [person, setPerson] = useState([]);\n\n  const [clean, setClean] = useState(\"\");\n  const [number, setNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  // const [del, setDel] = useState(false)\n\n  useEffect(() => {\n    personService.getAll().then((res) => {\n      setPerson(res);\n    });\n  }, []);\n\n  // useEffect(() => {\n  //   noteService\n  //     .getAll()\n  //     .then(initialNotes => {\n  //       setNotes(initialNotes)\n  //     })\n  // }, [])\n\n  const form = (event) => {\n    event.preventDefault();\n\n    if (names) {\n      if (window.confirm(`${clean} is already in the phonebook, replace?`)) {\n        const id = person.find(x => x.name === clean).id\n        // console.log(id)\n        const personObject1 = {\n          name: clean,\n          number: number,\n        };\n        personService.replace(id, personObject1).then( res =>{\n          console.log(res)\n          // return setPerson(res)\n          \n        })\n        personService.getAll().then( res => setPerson(res))\n\n\n        console.log(person)\n      }\n\n    } else {\n      const personObject = {\n        name: clean,\n        number: number\n      };\n\n      personService.create(personObject).then((res) => {\n        console.log(number)\n        return setPerson(person.concat(res));\n      });\n    }\n\n    setClean(\"\");\n    setNumber(\"\");\n  };\n  const remove = (id) => {\n    if (window.confirm(\"Do you really want to delete?\")) {\n      personService\n        .update(id)\n        .then((res) => {\n          console.log(res);\n          setFilter(\"\");\n        })\n        .catch((error) => {\n          alert(\n            `the note '${person\n              .filter((x) => x.id === id)\n              .map((x) => x.name)}' was already deleted from server`\n          );\n          setPerson(person.filter((n) => n.id !== id));\n        });\n\n        personService.getAll().then(res => setPerson(res))\n\n    }\n  };\n\n  // console.log(id)\n\n  const change1 = (event) => {\n    setClean(event.target.value);\n  };\n  const change2 = (event) => {\n    setNumber(event.target.value);\n  };\n  const change0 = (event) => {\n    setFilter(event.target.value);\n  };\n\n  const names = person.map((person) => person.name).includes(`${clean}`);\n\n  const filtered = person.filter((persons) =>\n    persons.name.toUpperCase().includes(`${filter.toUpperCase()}`)\n  );\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Form\n        form={form}\n        filter={filter}\n        change0={change0}\n        change1={change1}\n        change2={change2}\n        number={number}\n        clean={clean}\n      />\n      <h2>Numbers</h2>\n\n      <ul>\n        {filtered.map((person, i) => (\n          <Person\n            key={i}\n            name={person.name}\n            number={person.number}\n            remove={() => remove(person.id)}\n          />\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}