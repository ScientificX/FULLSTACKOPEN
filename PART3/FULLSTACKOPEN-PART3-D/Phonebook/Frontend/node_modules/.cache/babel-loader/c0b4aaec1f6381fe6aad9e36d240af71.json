{"ast":null,"code":"import _slicedToArray from\"/home/fascher/Desktop/FULLSTACKOPEN/PART3/FULLSTACKOPEN-PART3-D/Phonebook/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Person from\"./components/Person\";import Form from\"./components/Form\";import Filter from\"./components/Filter\";import axios from\"axios\";import personService from\"./services/persons\";import Notification from\"./components/Notification\";var App=function App(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),person=_useState2[0],setPerson=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),clean=_useState4[0],setClean=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),number=_useState6[0],setNumber=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),filter=_useState8[0],setFilter=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),errors=_useState10[0],setErrors=_useState10[1];useEffect(function(){personService.getAll().then(function(res){setPerson(res);});},[]);// useEffect(() => {\n//   noteService\n//     .getAll()\n//     .then(initialNotes => {\n//       setNotes(initialNotes)\n//     })\n// }, [])\nvar form=function form(event){event.preventDefault();if(names){if(window.confirm(\"\".concat(clean,\" is already in the phonebook, replace?\"))){var id=person.find(function(x){return x.name===clean;}).id;// console.log(id)\nvar personObject1={name:clean,number:number};personService.replace(id,personObject1).then(function(res){console.log(res);// return setPerson(res)\n});personService.getAll().then(function(res){return setPerson(res);});console.log(person);}}else{var personObject={name:clean,number:number};personService.create(personObject).then(function(res){setErrors(\"Note \".concat(personObject.name,\" was added \"));setTimeout(function(){setErrors(null);},5000);return setPerson(person.concat(res));}).catch(function(error){setErrors(error.response.data);setTimeout(function(){setErrors(null);},5000);});}setClean(\"\");setNumber(\"\");};var _remove=function remove(id){if(window.confirm(\"Do you really want to delete?\")){personService.update(id).then(function(res){setErrors(\"Note \".concat(person.filter(function(x){return x.id===id;}).map(function(x){return x.name;}),\" was removed\"));setTimeout(function(){setErrors(null);},5000);setFilter(\"\");}).catch(function(error){setErrors(\"Note \".concat(person.filter(function(x){return x.id===id;}).map(function(x){return x.name;}),\" was already removed \"));setTimeout(function(){setErrors(null);},5000);setPerson(person.filter(function(n){return n.id!==id;}));});personService.getAll().then(function(res){return setPerson(res);});}};// console.log(id)\nvar change1=function change1(event){setClean(event.target.value);};var change2=function change2(event){setNumber(event.target.value);};var change0=function change0(event){setFilter(event.target.value);};var names=person.map(function(person){return person.name;}).includes(\"\".concat(clean));var filtered=person.filter(function(persons){return persons.name.toUpperCase().includes(\"\".concat(filter.toUpperCase()));});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Phonebook\"),/*#__PURE__*/React.createElement(Notification,{message:errors}),/*#__PURE__*/React.createElement(Form,{form:form,filter:filter,change0:change0,change1:change1,change2:change2,number:number,clean:clean}),/*#__PURE__*/React.createElement(\"h2\",null,\"Numbers\"),/*#__PURE__*/React.createElement(\"ul\",null,filtered.map(function(person,i){return/*#__PURE__*/React.createElement(Person,{key:i,name:person.name,number:person.number,remove:function remove(){return _remove(person.id);}});})));};export default App;","map":{"version":3,"sources":["/home/fascher/Desktop/FULLSTACKOPEN/PART3/FULLSTACKOPEN-PART3-D/Phonebook/Frontend/src/App.js"],"names":["React","useState","useEffect","Person","Form","Filter","axios","personService","Notification","App","props","person","setPerson","clean","setClean","number","setNumber","filter","setFilter","errors","setErrors","getAll","then","res","form","event","preventDefault","names","window","confirm","id","find","x","name","personObject1","replace","console","log","personObject","create","setTimeout","concat","catch","error","response","data","remove","update","map","n","change1","target","value","change2","change0","includes","filtered","persons","toUpperCase","i"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Person from \"./components/Person\";\nimport Form from \"./components/Form\";\nimport Filter from \"./components/Filter\";\nimport axios from \"axios\";\nimport personService from \"./services/persons\";\nimport Notification from \"./components/Notification\";\n\nconst App = (props) => {\n  const [person, setPerson] = useState([]);\n\n  const [clean, setClean] = useState(\"\");\n  const [number, setNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [errors, setErrors] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then((res) => {\n      setPerson(res);\n    });\n  }, []);\n\n  // useEffect(() => {\n  //   noteService\n  //     .getAll()\n  //     .then(initialNotes => {\n  //       setNotes(initialNotes)\n  //     })\n  // }, [])\n\n  const form = (event) => {\n    event.preventDefault();\n\n    if (names) {\n      if (window.confirm(`${clean} is already in the phonebook, replace?`)) {\n        const id = person.find((x) => x.name === clean).id;\n        // console.log(id)\n        const personObject1 = {\n          name: clean,\n          number: number,\n        };\n        personService.replace(id, personObject1).then((res) => {\n          console.log(res);\n          // return setPerson(res)\n        });\n        personService.getAll().then((res) => setPerson(res));\n\n        console.log(person);\n      }\n    } else {\n      const personObject = {\n        name: clean,\n        number: number,\n      };\n\n      personService.create(personObject).then((res) => {\n        setErrors(\n          `Note ${personObject.name} was added `\n        );\n        setTimeout(() => {\n          setErrors(null);\n        }, 5000);\n\n        return setPerson(person.concat(res));\n      }).catch(error => {\n        setErrors(error.response.data)\n\n        setTimeout(() => {\n          setErrors(null);\n        }, 5000);\n      })\n    }\n\n    setClean(\"\");\n    setNumber(\"\");\n  };\n  const remove = (id) => {\n    if (window.confirm(\"Do you really want to delete?\")) {\n      personService\n        .update(id)\n        .then((res) => {\n          \n          setErrors(\n            `Note ${person\n              .filter((x) => x.id === id)\n              .map((x) => x.name)} was removed`\n          );\n          setTimeout(() => {\n            setErrors(null);\n          }, 5000);\n\n          setFilter(\"\");\n        })\n        .catch((error) => {\n          setErrors(\n            `Note ${person\n              .filter((x) => x.id === id)\n              .map((x) => x.name)} was already removed `\n          );\n          setTimeout(() => {\n            setErrors(null);\n          }, 5000);\n          setPerson(person.filter((n) => n.id !== id));\n        });\n\n      personService.getAll().then((res) => setPerson(res));\n    }\n  };\n\n  // console.log(id)\n\n  const change1 = (event) => {\n    setClean(event.target.value);\n  };\n  const change2 = (event) => {\n    setNumber(event.target.value);\n  };\n  const change0 = (event) => {\n    setFilter(event.target.value);\n  };\n\n  const names = person.map((person) => person.name).includes(`${clean}`);\n\n  const filtered = person.filter((persons) =>\n    persons.name.toUpperCase().includes(`${filter.toUpperCase()}`)\n  );\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={errors} />\n      <Form\n        form={form}\n        filter={filter}\n        change0={change0}\n        change1={change1}\n        change2={change2}\n        number={number}\n        clean={clean}\n      />\n      <h2>Numbers</h2>\n\n      <ul>\n        {filtered.map((person, i) => (\n          <Person\n            key={i}\n            name={person.name}\n            number={person.number}\n            remove={() => remove(person.id)}\n          />\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}